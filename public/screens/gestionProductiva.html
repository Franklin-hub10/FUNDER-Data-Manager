<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestión Productiva</title>
    <link rel="stylesheet" href="/public/css/fichaDiagnostico.css">
    <link rel="stylesheet" href="/public/css/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
</head>
<body>
    <!-- Barra lateral -->
    <div class="sidebar" id="sidebar">
        <a class="navbar-brand" href="index.html">
            <img src="../../assets/images/Logo FUNDER 2021.png" alt="Logo">
        </a>
        <ul class="nav flex-column mt-4">
            <li class="nav-item">
                <button class="dropdown-btn" onclick="window.location.href='./home.html'">
                    <i class="bi bi-house-door-fill"></i> Home
                </button>
            </li>
            <li class="nav-item">
                <button class="dropdown-btn">
                    <i class="bi bi-gear-fill"></i> Gestión
                </button>
                <div class="dropdown-container">
                    <a class="nav-link" href="gestionComercial.html">Gestión Comercial</a>
                    <a class="nav-link" href="gestionFinanciera.html">Gestión Financiera</a>
                    <a class="nav-link" href="gestionOrganizacional.html">Gestión Organizacional</a>
                    <a class="nav-link" href="gestionProductiva.html">Gestión Productiva</a>
                </div>
            </li>
            <li class="nav-item">
                <button class="dropdown-btn">
                    <i class="bi bi-person-badge-fill"></i> Manager
                </button>
                <div class="dropdown-container">
                    <a class="nav-link" href="roles.html">Roles</a>
                    <a class="nav-link" href="gestionUsuarios.html">Usuarios</a>
                </div>
            </li>
            <li class="nav-item">
                <button class="dropdown-btn">
                    <i class="bi bi-bar-chart-line-fill"></i> Analityca
                </button>
                <div class="dropdown-container">
                    <a class="nav-link" href="#">Dashboard</a>
                    <a class="nav-link" href="#">Sugerencias del Dx</a>
                </div>
            </li>
        </ul>
    </div>

    <div class="content">
        <div class="header">
            <h1>Gestión Productiva</h1>
        </div>

        <form>
            <table>
                <tr>
                    <th>Preguntas</th>
                    <th>Diagnóstico</th>
                    <th>Medición Intermedia</th>
                    <th>Medición Final</th>
                    <th>Mejora Final</th>
                    <th>Status</th>
                </tr>
                <tr>
                    <td>¿Conoce su cadena productiva / procesos?</td>
                    <td><input type="checkbox" name="diagnostico1"></td>
                    <td><input type="checkbox" name="intermedia1"></td>
                    <td><input type="checkbox" name="final1"></td>
                    <td><input type="checkbox" name="final1.1"></td>
                    <td><input type="checkbox" name="status1"></td>
                </tr>
                <tr>
                    <td>¿Dispone de información documentada (inventario, fichas) sobre sus productos?</td>
                    <td><input type="checkbox" name="diagnostico2"></td>
                    <td><input type="checkbox" name="intermedia2"></td>
                    <td><input type="checkbox" name="final2"></td>
                    <td><input type="checkbox" name="final2.2"></td>
                    <td><input type="checkbox" name="status2"></td>
                </tr>
                <tr>
                    <td>¿Dispone de equipos o maquinarias para la elaboración de sus productos?</td>
                    <td><input type="checkbox" name="diagnostico3"></td>
                    <td><input type="checkbox" name="intermedia3"></td>
                    <td><input type="checkbox" name="final3"></td>
                    <td><input type="checkbox" name="final3.3"></td>
                    <td><input type="checkbox" name="status3"></td>
                </tr>
                <tr>
                    <td>¿Conoce y aplica las medidas de bioseguridad adecuadas a sus productos y/o servicios?</td>
                    <td><input type="checkbox" name="diagnostico4"></td>
                    <td><input type="checkbox" name="intermedia4"></td>
                    <td><input type="checkbox" name="final4"></td>
                    <td><input type="checkbox" name="final4.4"></td>
                    <td><input type="checkbox" name="status4"></td>
                </tr>
                <tr>
                    <td>¿Dispone de equipos o maquinarias necesarios para la elaboración de sus productos?</td>
                    <td><input type="checkbox" name="diagnostico5"></td>
                    <td><input type="checkbox" name="intermedia5"></td>
                    <td><input type="checkbox" name="final5"></td>
                    <td><input type="checkbox" name="final5.5"></td>
                    <td><input type="checkbox" name="status5"></td>
                </tr>
                <tr>
                    <td>¿Dispone de una adecuada infraestructura para su gestión? (taller, bodegas)</td>
                    <td><input type="checkbox" name="diagnostico6"></td>
                    <td><input type="checkbox" name="intermedia6"></td>
                    <td><input type="checkbox" name="final6"></td>
                    <td><input type="checkbox" name="final6.6"></td>
                    <td><input type="checkbox" name="status6"></td>
                </tr>
                <tr>
                    <td>¿Dispone de computador y acceso a internet en su negocio?</td>
                    <td><input type="checkbox" name="diagnostico7"></td>
                    <td><input type="checkbox" name="intermedia7"></td>
                    <td><input type="checkbox" name="final7"></td>
                    <td><input type="checkbox" name="final7.7"></td>
                    <td><input type="checkbox" name="status7"></td>
                </tr>
                <tr>
                    <td>¿Dispone de un plan de emergencia y seguridad?</td>
                    <td><input type="checkbox" name="diagnostico8"></td>
                    <td><input type="checkbox" name="intermedia8"></td>
                    <td><input type="checkbox" name="final8"></td>
                    <td><input type="checkbox" name="final8.8"></td>
                    <td><input type="checkbox" name="status8"></td>
                </tr>
                <tr>
                    <td>¿Tiene identificado proveedores con precios de venta adecuados?</td>
                    <td><input type="checkbox" name="diagnostico9"></td>
                    <td><input type="checkbox" name="intermedia9"></td>
                    <td><input type="checkbox" name="final9"></td>
                    <td><input type="checkbox" name="final9.9"></td>
                    <td><input type="checkbox" name="status9"></td>
                </tr>
                <tr>
                    <td>Subtotal:</td>
                    <td><input type="text" id="subtotal_diagnostico" readonly></td>
                    <td><input type="text" id="subtotal_intermedia" readonly></td>
                    <td><input type="text" id="subtotal_final" readonly></td>
                    <td><input type="text" id="subtotal_final1" readonly></td>
                    <td><input type="text" id="status_final" readonly></td>
                    <td></td>
                </tr>
            </table>
            <button type="submit">Guardar</button>
        </form>
    </div>

    <script>
        // Función para calcular los subtotales
        function calcularSubtotales() {
            // Contar checkboxes marcados en cada columna
            const diagnostico = document.querySelectorAll('input[name^="diagnostico"]:checked').length;
            const intermedia = document.querySelectorAll('input[name^="intermedia"]:checked').length;
            const final = document.querySelectorAll('input[name^="final"]:checked').length;
            const final1 = document.querySelectorAll('input[name^="final1"]:checked').length;
            const status = document.querySelectorAll('input[name^="status"]:checked').length;

            // Actualizar los campos de subtotal
            document.getElementById('subtotal_diagnostico').value = diagnostico;
            document.getElementById('subtotal_intermedia').value = intermedia;
            document.getElementById('subtotal_final').value = final;
            document.getElementById('subtotal_final1').value = final1;
            document.getElementById('status_final').value = status;
        }

        // Evento para calcular subtotales automáticamente al marcar/desmarcar un checkbox
        const checkboxes = document.querySelectorAll('input[type="checkbox"]');
        checkboxes.forEach(checkbox => {
            checkbox.addEventListener('change', calcularSubtotales);
        });

        // Función para manejar los botones desplegables
        const dropdownBtns = document.querySelectorAll('.dropdown-btn');
        dropdownBtns.forEach((btn) => {
            btn.addEventListener('click', function () {
                const container = this.nextElementSibling;
                container.classList.toggle('show');
            });
        });
    </script>
</body>
</html>